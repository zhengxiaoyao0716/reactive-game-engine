{"version":3,"sources":["pixi/hook.js","pixi/Resource/make.js","pixi/Container.js","pixi/Loader.js","pixi/Sprite/Movable.js","pixi/Sprite/Animated.js","pixi/Sprite/index.js","pixi/Stage.js","pixi/Ticker.js","pixi/index.js","pixi/Gradient/Simple.js","pixi/Gradient/Velocity.js","game/asset/bg.jpg","game/asset/start.png","game/Scene0/asset/boat.png","game/Scene0/asset/plane.png","game/asset/index.js","game/Home/index.js","util/rxjs/pick.js","util/rxjs/index.js","core/collection/util.js","core/collection/TreeSet.js","core/member.js","core/shoot.js","core/mock.js","core/index.js","util/useCore.js","util/css.js","game/Scene0/asset/index.js","pixi/UI/index.js","game/Scene0/index.js","game/Setting/index.js","game/index.js","index.js","pixi/Gradient/index.js","pixi/Renderer.js"],"names":["defaultClose","value","close","destroy","remove","call","useCloseable","supplier","arguments","length","undefined","deps","_useState","useState","_useState2","Object","E_MyProject_Other_reactive_game_engine_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","state","setState","useEffect","promise","Promise","resolve","then","useCloseableImmedite","useMemo","useUpdate","update","newColor","data","Error","concat","toString","hex","toUpperCase","R","G","B","A","rgb","rgba","alpha","ContainerContext","createContext","displayName","useContainer","useContext","LoaderContext","useLoader","loader","loaders","shared","useDebugValue","progress","MovableSprite","_ref","animId","textures","position","velocity","props","objectWithoutProperties","id","Function","children","autoUpdate","scale","_ref$playing","playing","_ref$loop","loop","_ref$animationSpeed","animationSpeed","container","sprite","extras","AnimatedSprite","addChild","removeChild","set","x","y","play","stop","react_default","a","createElement","SpriteContext","Provider","objectSpread","UDLR","_ref2","vx","vy","toUDLR","eachSize","idle","slice","up","down","left","right","StageContext","Stage","PIXIContainer","useStage","LazyRefresh","stage","renderer","useRenderer","ticker","useTicker","refresh","useCallback","render","addOnce","TickRefresh","add","PIXITicker","Ticker","TickerContext","_ref$running","running","_ref$speed","speed","_ref$minFPS","minFPS","bind","fn","context","priority","_head","started","start","FPS","toFixed","__webpack_require__","d","__webpack_exports__","Container_useContainer","Gradient","Loader_useLoader","Renderer","Stage_Stage","Ticker_Ticker","Ticker_useTicker","pointsFn","points","time","lastTime","E_MyProject_Other_reactive_game_engine_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","simplePointsFn","gradientFn","point0","point1","remain","interp","elapsedMS","Math","max","min","map","vector","join","point","E_MyProject_Other_reactive_game_engine_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","deltaTime","vectors","E_MyProject_Other_reactive_game_engine_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","_loop","index","previous","forEach","module","exports","p","images","bg","require","Home","history","location","onStart","match","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","window","requestFullscreen","document","body","webkitRequestFullscreen","setTimeout","console","warn","push","pathname","this","className","src","alt","onClick","Link","to","pick","key","predicate","mapper","source","pipe","filter","useObservable","observable","init","slicedToArray","setValue","subcription","subscribe","unsubscribe","JSON","stringify","shuffle","elements","wrapper","element","weight","random","sort","compareExtract","compareNature","l","r","compare","target1","target2","TreeSet","comparator","classCallCheck","pushAll","createClass","isEmpty","splice","size","target","middle","cmp","binarySearch","_this","get","members","fs","dir","text","existsSync","readFileSync","abrupt","parse","_callee2","resp","_context2","fetch","process","sent","json","entries","reduce","dict","_ref3","_ref4","type","defineProperty","gender","name","female","male","toConsumableArray","_ref5","其它","美术","特殊","femaleNum","group","num","_ref6","divideGroup","groups","_ref7","startsWith","result","member","groupIndex","Array","fill","scores","_ref8","score","last","head","top","pop","minGroup","maxGroup","maleIndex","findIndex","_ref9","femaleIndex","_ref10","divided","info","","点击查看统计信息","groupEnd","types","sum","_ref11","_ref12","_ref14","_ref15","analyzeType","_ref16","boats","_","seats","calcPosition","boat","seat","offset","core_shoot","freq","turn","seated","Subject","delay","moving","scan","shootPathFit","subscription","from","zip","interval","boatsShooter","mergeMap","distance","shoot","take","startWith","frames","fitTwine","fitSpiral","fitCircle","originZero","fitFunction","origin","shootOrigin","sqrt","vec","pow","xp","yp","angle","vectorAngle","_fitFunction","vertex","zero","width","height","b","c","atan","PI","bend","offsetHalf","move","ω","sin","vectorRatio","_vectorRatio","_vectorRatio2","ratio","diameter","ratioTarget","vectorFirst","ratioLast","vectorLast","ratioNow","even","knotsTotal","ceil","knotsNow","ratioEven","ratioOdd","delta","mock","scene","subject","scene0","subscriptions","pause","sub","setting","_this2","list","name1","name2","localeCompare","updateMember","core","events","keys","rpc","event","_len","args","_key","apply","properties","useCore","sharedImages","plane","url","option","styleOf","scaleMode","_renderer$view","view","clientWidth","clientHeight","offsetLeft","offsetTop","transform","UI","_ref$className","style","fromEvent","_event","debounceTime","Scene0","UI_UI","_ref4$","Scene0_MovingBoat","_ref5$position","nameAlign","Scene0_MovingMember","MovingBoat","_ref7$position","v","pixi","Velocity","_ref9$","MovingMember","_ref10$vertex","_ref10$vertex$","_ref10$velocity","ν","_ref12$","cos","Setting","_ref$line","line","lined","disabled","insert","setInsert","exported","genders","file","Blob","save","download","href","URL","createObjectURL","click","placeholder","onChange","trim","Setting_TableHead","Setting_TableMember","checked","TableHead","Fragment","TableMember","_ref13","Scenes","0","src_game","BrowserRouter","Route","exact","path","component","Redirect","Scene","params","sceneId","assign","Creator","transparent","CSS","supports","Set","ReactDOM","Game","getElementById","useRef","current","gradient","useGradient","Simple","default","RendererContext","create","canvasRef","autoDetectRenderer","react__WEBPACK_IMPORTED_MODULE_1___default","ref","options","E_MyProject_Other_reactive_game_engine_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/main.293bf215.chunk.js","sourcesContent":["import { useState, useEffect, useMemo, DependencyList } from 'react';\r\n\r\ninterface Closeable {\r\n    destroy?: () => void;\r\n    remove?: () => void;\r\n    close?: () => void;\r\n}\r\n\r\nconst defaultClose = (value: Closeable) => (value.close || value.destroy || value.remove).call(value);\r\n\r\nexport function useCloseable<T>(\r\n    supplier: () => T | Promise<T>,\r\n    close?: (value: T) => void = defaultClose,\r\n    deps?: DependencyList = [],\r\n): T | null {\r\n    const [state, setState] = useState(null);\r\n    useEffect(() => {\r\n        const promise = Promise.resolve(supplier());\r\n        promise.then(setState);\r\n        return () => promise.then(close);\r\n    }, deps);\r\n    return state;\r\n};\r\n\r\nexport function useCloseableImmedite<T>(\r\n    supplier: () => T,\r\n    close?: (value: T) => void = defaultClose,\r\n    deps?: DependencyList = [],\r\n): T | null {\r\n    const state = useMemo(supplier, []);\r\n    useEffect(() => () => close(state), deps);\r\n    return state;\r\n};\r\n\r\nexport const useUpdate: typeof useEffect = (update, deps) => {\r\n    useMemo(update, []);\r\n    useEffect(update, deps);\r\n};\r\n","import { loaders, Graphics, Circle, Ellipse, Polygon, Rectangle, RoundedRectangle, Point, Texture, Text, TextStyleOptions, CanvasRenderer } from 'pixi.js';\r\n\r\ntype Shapes = Circle | Ellipse | Polygon | Rectangle | RoundedRectangle;\r\n\r\nconst newColor = (value: number, data: string) => {\r\n    if (value > 0xFFFFFFFF) throw new Error(`color value overflow: ${value.toString(16)}`);\r\n    const hex = `#${value.toString(16).toUpperCase()}`;\r\n    const R = value / 0x01000000 | 0;\r\n    const G = (value / 0x00010000 | 0) % 0x100;\r\n    const B = (value & 0x0000FF00) >> 8;\r\n    const A = value & 0x000000FF;\r\n    return {\r\n        /** 0x123456 */value, /** base64 uri data */data,\r\n        /** \"#123456\" */hex, /** \"123456\" */toString() { return value.toString(16); },\r\n        rgb: { R, G, B }, rgba: { R, G, B, A }, alpha: A,\r\n    };\r\n};\r\nexport const THColor = {\r\n    /** red */\r\n    Reimu: newColor(0xCB1B45ff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQoU2M8Le36nwEPYBwZCgDiuxFZv0b9QAAAAABJRU5ErkJggg=='),\r\n    /** black */\r\n    Marisa: newColor(0x1C1C1Cff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQoU2OUkZH5z4AHMI4MBQAGEgqh6nJAewAAAABJRU5ErkJggg=='),\r\n    /** yellow */\r\n    Alice: newColor(0xE98B2Aff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQoU2N82a31nwEPYBwZCgDzHRTxpXyovQAAAABJRU5ErkJggg=='),\r\n    /** baka */\r\n    Cirno: newColor(0x58B2DCff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVQoU2OM2HTnPwMewDgyFAAAMsMXMXWBeqIAAAAASUVORK5CYII='),\r\n    /** white */\r\n    Sakuya: newColor(0xFCFAF2ff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVQoU2P88+vTfwY8gHFkKAAA1JcfQVtkt10AAAAASUVORK5CYII='),\r\n    /** green */\r\n    Youmu: newColor(0x227D51ff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQoU2NUqg38z4AHMI4MBQDO6A+BFQpJiAAAAABJRU5ErkJggg=='),\r\n    /** sakura */\r\n    Yuyuko: newColor(0xFEDFE1ff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAFElEQVQoU2P8d//hfwY8gHFkKAAAFOcd8YzlO0MAAAAASUVORK5CYII='),\r\n    /** purple */\r\n    Yakumo: newColor(0x4A225Dff, 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAE0lEQVQoU2P0Uor9z4AHMI4MBQAdPA5J0HdVbgAAAABJRU5ErkJggg=='),\r\n};\r\n\r\nexport const makeResource = {\r\n    preset: {},\r\n    shape: (\r\n        { fill, line }: {\r\n            fill?: {\r\n                color?: number,\r\n                alpha?: number,\r\n            },\r\n            line?: { width?: number, color?: number, alpha?: number },\r\n        } = {},\r\n    ) => {\r\n        const border = (line && line.width) ? 2 * line.width : 0;\r\n        return {\r\n            draw: (shape: Shapes | ((graphics: Graphics) => void)) => {\r\n                const graphics = new Graphics();\r\n                fill ? graphics.beginFill(fill.color, fill.alpha) : graphics.beginFill(0x000000);\r\n                line && graphics.lineStyle(line.width, line.color, line.alpha);\r\n                if (shape instanceof Function) {\r\n                    shape(graphics);\r\n                } else {\r\n                    graphics.drawShape(shape);\r\n                }\r\n                return (id?: string, loader?: loaders.Loader, scaleMode?: number, resolution?: number) => {\r\n                    const texture = graphics.generateCanvasTexture(scaleMode, resolution);\r\n                    if (id) {\r\n                        if (loader) {\r\n                            const resource = new loaders.Resource(id, `#${id}`);\r\n                            loader.resources[id] = resource;\r\n                            resource.texture = texture;\r\n                        }\r\n                        Texture.addToCache(texture, id);\r\n                    }\r\n                    return texture;\r\n                };\r\n            },\r\n            circle(radius: number) {\r\n                return this.draw(new Circle(border + radius, border + radius, radius));\r\n            },\r\n            ellipse(width: number, height: number) {\r\n                return this.draw(new Ellipse(border + width, border + height, width, height));\r\n            },\r\n            polygon(...points: Point[]) {\r\n                return this.draw(new Polygon(...points));\r\n            },\r\n            rectangle(width: number, height: number) {\r\n                return this.draw(new Rectangle(border, border, width, height));\r\n            },\r\n            roundedRectangle(width: number, height: number, radius?: number) {\r\n                return this.draw(new RoundedRectangle(border, border, width, height, radius));\r\n            },\r\n            triangle(width: number, height: number, sharp: number) {\r\n                return this.draw(new Polygon(new Point(border + sharp, border), new Point(border, border + height), new Point(border + width, border + height)));\r\n            },\r\n            star(points: number, radius: number, innerRadius?: number, rotation?: number) {\r\n                return this.draw(graphics => graphics.drawStar(border + radius, border + radius, points, radius, innerRadius, rotation));\r\n            },\r\n        };\r\n    },\r\n    text: (value: string, style?: TextStyleOptions) => {\r\n        const renderer = new CanvasRenderer();\r\n        return (id?: string, loader?: loaders.Loader) => {\r\n            const text = new Text(value, style);\r\n            renderer.render(text);\r\n            renderer.clear();\r\n            const texture = text.texture;\r\n\r\n            if (id) {\r\n                if (loader) {\r\n                    const resource = new loaders.Resource(id, `#${id}`);\r\n                    loader.resources[id] = resource;\r\n                    resource.texture = texture;\r\n                }\r\n                Texture.addToCache(texture, id);\r\n            }\r\n            return texture;\r\n        };\r\n    },\r\n    // spritesheet: () => {\r\n    //     const canvas = document.createElement('canvas');\r\n    //     // TODO draw spritesheet.\r\n    //     const baseTexture = BaseTexture.fromCanvas(canvas);\r\n    //     const data = {};\r\n\r\n    //     const spritesheet = new Spritesheet(baseTexture, data);\r\n    //     return (id?: string, loader?: loaders.Loader) => {\r\n    //         if (id) {\r\n    //             if (loader) {\r\n    //                 const resource = new loaders.Resource(id, `#${id}`);\r\n    //                 loader.resources[id] = resource;\r\n    //                 resource.spritesheet = spritesheet;\r\n    //             }\r\n    //         }\r\n    //         return spritesheet;\r\n    //     };\r\n    // },\r\n};\r\n\r\n// type SpritesheetFrameData = {\r\n//     frame: { x: number, y: number, h: number, w: number },\r\n//     // rotated?: boolean,\r\n//     trimmed?: boolean,\r\n//     // spriteSourceSize?: { x: number, y: number, h: number, w: number },\r\n//     // sourceSize?: { h: number, w: number },\r\n// };\r\n// const spritesheetData = (width: number, height: number, scale = 1) => {\r\n//     const meta = {\r\n//         // image: imageName,\r\n//         size: { w: width, h: height },\r\n//         scale,\r\n//     };\r\n//     const frames: { [frameName: string]: FrameData } = {};\r\n//     const animations: { [animName: string]: string[] } = {}; // { animName -> [ ...frameName ] }\r\n//     return {\r\n//         meta,\r\n//         frames,\r\n//         animations,\r\n//     };\r\n// };\r\n","import React, { createContext, Context, useContext } from 'react';\r\nimport { Container as PIXIContainer } from 'pixi.js';\r\nimport { useCloseableImmedite } from './hook';\r\n\r\ninterface Props {\r\n    children?: ReactNode;\r\n}\r\n\r\nexport const ContainerContext: Context<PIXIContainer> = createContext(null);\r\nContainerContext.displayName = 'Container';\r\n\r\nexport const Container = ({ children }: Props) => {\r\n    const container = useCloseableImmedite(() => new PIXIContainer());\r\n    return <ContainerContext.Provider value={container}>{children}</ContainerContext.Provider>;\r\n};\r\n\r\nexport const useContainer = () => useContext(ContainerContext);\r\n","import React, { createContext, Context, useContext, useMemo, useDebugValue } from 'react';\r\nimport { loaders } from 'pixi.js';\r\nimport { useCloseableImmedite, useUpdate } from './hook';\r\n\r\ninterface Props {\r\n    children?: ReactNode;\r\n    baseUrl?: string;\r\n    concurrency?: number;\r\n}\r\n\r\nexport const LoaderContext: Context<loaders.Loader> = createContext(null);\r\nLoaderContext.displayName = 'Loader';\r\n\r\nexport const Loader = ({ children, baseUrl, concurrency }: Props) => {\r\n    const loader = useCloseableImmedite(() => new loaders.Loader(baseUrl, concurrency));\r\n\r\n    useUpdate(() => {\r\n        if (baseUrl !== loader.baseUrl) loader.baseUrl = baseUrl;\r\n        if (concurrency !== loader.concurrency) loader.concurrency = concurrency;\r\n    }, []);\r\n\r\n    return <LoaderContext.Provider value={loader}>{children}</LoaderContext.Provider>;\r\n};\r\n\r\nexport const useLoader = () => {\r\n    const loader = useContext(LoaderContext) || loaders.shared; // use the `shared` loader if no custom `Loader` component found.\r\n    useDebugValue(loader.progress, progress => `progress: ${progress}`);\r\n    return loader;\r\n};\r\n\r\nexport const LoaderCreator = (baseUrl?: string, concurrency?: number) => useMemo(() => ({ create: () => new loaders.Loader(baseUrl, concurrency) }), []);\r\n","import { AnimatedSpriteProps, AnimatedSprite } from '.';\r\nimport { Texture } from 'pixi.js';\r\n\r\n\r\nexport interface MovableSpriteProps extends AnimatedSpriteProps {\r\n    animId: string | ((velocity: { vx: number, vy: number }) => string);\r\n    textures: { [animId: string]: Texture[] };\r\n    position: { x: number, y: number };\r\n    velocity: { vx: number, vy: number };\r\n}\r\n\r\nexport const MovableSprite = ({ animId, textures, position, velocity, ...props }: MovableSpriteProps) => {\r\n    const id = animId instanceof Function ? animId(velocity) : animId;\r\n    return AnimatedSprite({ textures: textures[id], position, ...props });\r\n};\r\n\r\nMovableSprite.UDLR = {\r\n    animId: ({ vx, vy }) => (vx === 0 ? (vy === 0 ? 'idle' : (vy < 0 ? 'up' : 'down')) : (vx < 0 ? 'left' : 'right')),\r\n};\r\nMovableSprite.toUDLR = (textures: Texture[], eachSize = 2) => ({\r\n    idle: textures.slice(0, eachSize),\r\n    up: textures.slice(1 * eachSize, 2 * eachSize),\r\n    down: textures.slice(2 * eachSize, 3 * eachSize),\r\n    left: textures.slice(3 * eachSize, 4 * eachSize),\r\n    right: textures.slice(4 * eachSize, 5 * eachSize),\r\n});\r\n","import React, { ReactNode } from 'react';\r\nimport { Texture, AnimatedSpriteTextureTimeObject, extras } from 'pixi.js';\r\nimport { useContainer } from '..';\r\nimport { $Props } from '../../core/@types';\r\nimport { SpriteContext } from '.';\r\nimport { useCloseableImmedite, useUpdate } from '../hook';\r\n\r\nexport interface AnimatedSpriteProps {\r\n    children?: ReactNode;\r\n    textures: Texture[] | AnimatedSpriteTextureTimeObject[],\r\n    autoUpdate?: $Props.frozen<boolean>,\r\n    position?: { x: number, y: number },\r\n    playing?: boolean,\r\n    loop?: boolean,\r\n    animationSpeed?: number,\r\n    scale?: { x: number, y: number },\r\n}\r\n\r\nexport const AnimatedSprite = ({ children, textures, autoUpdate, position, scale, playing = true, loop = true, animationSpeed = 1 }: AnimatedSpriteProps) => {\r\n    const container = useContainer();\r\n    const sprite = useCloseableImmedite(() => {\r\n        const sprite = new extras.AnimatedSprite(textures, autoUpdate);\r\n        container.addChild(sprite);\r\n        return sprite;\r\n    }, sprite => {\r\n        container.removeChild(sprite);\r\n        sprite.destroy();\r\n    });\r\n\r\n    useUpdate(() => {\r\n        if (textures !== sprite.textures) sprite.textures = textures;\r\n        if (position && position !== sprite.position) sprite.position.set(position.x, position.y);\r\n        if (playing !== sprite.playing) playing ? sprite.play() : sprite.stop();\r\n        if (scale) {\r\n            if (scale.x !== sprite.scale.x) sprite.scale.x = scale.x;\r\n            if (scale.y !== sprite.scale.y) sprite.scale.y = scale.y;\r\n        }\r\n        if (loop !== sprite.loop) sprite.loop = loop;\r\n        if (animationSpeed !== sprite.animationSpeed) sprite.animationSpeed = animationSpeed;\r\n    }, [textures, position, playing, loop, animationSpeed]);\r\n\r\n    return <SpriteContext.Provider value={sprite}>{children}</SpriteContext.Provider>;\r\n};\r\n","import React, { ReactNode, createContext, Context } from 'react';\r\nimport { Sprite as PIXISprite, Texture } from 'pixi.js';\r\nimport { useCloseableImmedite, useUpdate } from '../hook';\r\nimport { useContainer } from '..';\r\n\r\nexport interface SpriteProps {\r\n    children?: ReactNode;\r\n    texture?: Texture;\r\n    position?: { x: number, y: number };\r\n    scale?: { x: number, y: number },\r\n}\r\n\r\nexport const SpriteContext: Context<PIXISprite> = createContext(null);\r\nSpriteContext.displayName = 'Sprite';\r\n\r\nexport const Sprite = ({ children, texture, position, scale }: SpriteProps) => {\r\n    const container = useContainer();\r\n    const sprite = useCloseableImmedite(() => {\r\n        const sprite = new PIXISprite(texture);\r\n        container.addChild(sprite);\r\n        return sprite;\r\n    }, sprite => {\r\n        container.removeChild(sprite);\r\n        sprite.destroy();\r\n    });\r\n\r\n    useUpdate(() => {\r\n        if (sprite == null) return;\r\n        if (texture !== sprite.texture) sprite.texture = texture;\r\n        if (position && position !== sprite.position) sprite.position.set(position.x, position.y);\r\n        if (scale) {\r\n            if (scale.x !== sprite.scale.x) sprite.scale.x = scale.x;\r\n            if (scale.y !== sprite.scale.y) sprite.scale.y = scale.y;\r\n        }\r\n    }, [texture, position]);\r\n\r\n    return <SpriteContext.Provider value={sprite}>{children}</SpriteContext.Provider>;\r\n};\r\n\r\nexport * from './Animated';\r\nexport * from './Movable';\r\n","import React, { ReactNode, useEffect, useCallback } from 'react';\r\nimport { Container as PIXIContainer } from 'pixi.js';\r\nimport { useRenderer, useTicker } from '.';\r\nimport { ContainerContext, useContainer } from './Container';\r\nimport { useCloseableImmedite } from './hook';\r\n\r\ninterface Props {\r\n    children?: ReactNode;\r\n}\r\n\r\nexport const StageContext = ContainerContext;\r\n\r\nexport const Stage = ({ children }: Props) => {\r\n    const container = useCloseableImmedite(() => new PIXIContainer());\r\n    return <StageContext.Provider value={container}>{children}</StageContext.Provider>;\r\n};\r\n\r\nexport const useStage = useContainer;\r\n\r\n/** `LazyRefresh` would refresh the `stage` only if the node was re-rendered. */\r\nStage.LazyRefresh = () => {\r\n    const stage = useStage();\r\n    const renderer = useRenderer();\r\n    const ticker = useTicker(); \r\n    const refresh = useCallback(() => renderer.render(stage), []);\r\n    ticker ? ticker.addOnce(refresh) : refresh();\r\n    return null;\r\n};\r\nStage.LazyRefresh.displayName = 'Stage.LazyRefresh';\r\n\r\n/** `TickRefresh` would re-render each time the ticker frame updated. */\r\nStage.TickRefresh = () => {\r\n    const stage = useStage();\r\n    const renderer = useRenderer();\r\n    const ticker = useTicker();\r\n    useEffect(() => {\r\n        const refresh = () => renderer.render(stage);\r\n        ticker.add(refresh);\r\n        return () => ticker.remove(refresh);\r\n    }, []);\r\n    return null;\r\n};\r\nStage.TickRefresh.displayName = 'Stage.TickRefresh';\r\n","import React, { Context, createContext, useContext, useDebugValue } from 'react';\r\nimport { ticker } from 'pixi.js';\r\nimport { useCloseableImmedite, useUpdate } from './hook';\r\n\r\ntype PIXITicker = ticker.Ticker;\r\nconst PIXITicker = ticker.Ticker; // eslint-disable-line no-redeclare\r\nconst shared = ticker.shared;\r\n\r\ninterface Props {\r\n    children?: ReactNode;\r\n    running?: boolean,\r\n    speed?: number,\r\n    minFPS?: number,\r\n}\r\n\r\nexport const TickerContext: Context<PIXITicker> = createContext(null);\r\nTickerContext.displayName = 'Ticker';\r\n\r\nexport const Ticker = ({ children, running = true, speed = 1, minFPS = 10 }: Props) => {\r\n    const ticker = useCloseableImmedite(() => {\r\n        const ticker = new PIXITicker();\r\n        // patch for [#5653](https://github.com/pixijs/pixi.js/issues/5653)\r\n        const remove = ticker.remove.bind(ticker);\r\n        ticker.remove = (fn: (deltaTime: number) => void, context?: any, priority?: number) => ticker._head && remove(fn, context, priority);\r\n        return ticker;\r\n    });\r\n\r\n    useUpdate(() => {\r\n        if (ticker == null) return;\r\n        if (running !== ticker.started) running ? ticker.start() : ticker.stop();\r\n        if (speed !== ticker.speed) ticker.speed = speed;\r\n        if (minFPS !== ticker.minFPS) ticker.minFPS = minFPS;\r\n    }, [running, speed, minFPS]);\r\n\r\n    return <TickerContext.Provider value={ticker}>{children}</TickerContext.Provider>;\r\n};\r\n\r\nexport const useTicker = () => {\r\n    const ticker = useContext(TickerContext) || shared;\r\n    useDebugValue(ticker, ticker => ticker.FPS.toFixed(2));\r\n    return ticker;\r\n}; // use the `shared` ticker if no custom `Ticker` component found.\r\n","export * from './Resource';\r\nexport * from './App';\r\nexport * from './Container';\r\nexport * from './hook';\r\nexport * from './Gradient';\r\nexport * from './Loader';\r\nexport * from './Renderer';\r\nexport * from './Sprite';\r\nexport * from './Stage';\r\nexport * from './Ticker';\r\n","import { useCallback } from 'react';\r\nimport { PointsFn, GradientFn } from '.';\r\n\r\nconst simplePointsFn = (state: number): PointsFn<{ state: number, time: number }> => (\r\n    (ticker, points) => [{ state, time: ticker.lastTime }, ...points.slice(0, 1)]\r\n);\r\n\r\nconst simpleGradientFn = (): GradientFn<{ state: number, time: number }, number> => (\r\n    (ticker, [point0, point1], state) => {\r\n        if (point1 == null) return 0;\r\n        if (state === point0.state) return point0.state;\r\n\r\n        const remain = (point0.time - point1.time) - (ticker.lastTime - point0.time);\r\n        const interp = state + (point0.state - state) / remain * ticker.elapsedMS;\r\n\r\n        return Math.max(state, Math.min(interp, point0.state));\r\n    }\r\n);\r\n\r\nexport default (state: number) => {\r\n    const pointsFn = useCallback(simplePointsFn(state), [state]);\r\n    const gradientFn = useCallback(simpleGradientFn(), []);\r\n    return { pointsFn, gradientFn };\r\n};\r\n","import { useCallback } from 'react';\r\nimport { PointsFn, GradientFn } from '.';\r\n\r\ntype State = number[][];\r\n\r\nconst velocityGradientFn = (): GradientFn<State, State> => (\r\n    (ticker, [point], state) => {\r\n        if (state == null) return point;\r\n        const { deltaTime } = ticker;\r\n\r\n        const vectors = state.map(vector => [...vector]); // deep clone\r\n        for (let index = 1; index < vectors.length; index++) {\r\n            const vector = vectors[vectors.length - index];\r\n            const previous = vectors[vectors.length - index - 1];\r\n            vector.forEach((value, index) => previous[index] = previous[index] + value * deltaTime);\r\n\r\n        }\r\n        return vectors;\r\n    }\r\n);\r\n\r\nexport default (state: State) => {\r\n    const deps = state.map(vector => vector.join(','));\r\n    const pointsFn: PointsFn<State> = useCallback(() => [state], deps);\r\n    const gradientFn = useCallback(velocityGradientFn(), deps);\r\n    return { pointsFn, gradientFn };\r\n};\r\n","module.exports = __webpack_public_path__ + \"static/media/bg.d150436c.jpg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUIAAABLCAYAAAAF1Y7gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5OThmZjBlYy02NWU4LTdkNDAtYmNlNy1lM2M3NDcwMmNlYzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTg3MTI5MDU2RkE4MTFFOThGQ0FDNzcyRkRDRjE1RTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTg3MTI5MDQ2RkE4MTFFOThGQ0FDNzcyRkRDRjE1RTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTlEODlCNzQ2QjM0MTFFOUIyMTY4RDgyODFFMkY2OEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTlEODlCNzU2QjM0MTFFOUIyMTY4RDgyODFFMkY2OEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7e3qudAAAHEklEQVR42uyd7XXiRhSGBYf/6w5CB7ErgK3A7sBKBfZWsHIFiysIVBBSQaADXEFwB1AB0U1mHdsHgQbd0Xw9zzk67A+vNHPnzjvvjKTRqIBeOBwOlcJp5oPBYEs0IaK8H9c/Zdfz1HlfEc00EkKDKZGEyPJ+qpH4rss5pKkAIHcQQgBACAkBACCEAAAIIQAAQggAgBACACCEAAAIIQAAQggAgBACACCEAAAIIQAAQggAkCUjmz8+HA5X9c9dfYzrY5pIDJaDwWBmGYdl/XPloayz+to7l+evY7G0/U8mLyQfrhPKi1WbPfDqus9Mvbsg+0zOL/3PdRlWXStbX3/a4jryN5XlqVX6iUYdOwuhCcBjfdwmOBiUlg1SeozDrw7PvZfOf4EAihDcJ5gXbTu8iOCkq+h2EIixwvVtYjLx1B4ur/s0apHoUvmHRB3x8wU7PleJxkLc4M6iA8rMQFzMlwRjsa5jsYqkrGON+rY0Q5ME21oMwGx4RgRXCYvg3lbUjBv8JdVksIzDH4mKYGyDncZSxDaxmFgbgFM3S5aOp2JROSDc4Acn+HvCeRGTGxQ01uC2ObtB+cfwxIg/STjZX20cEG7wwyxhXqRNbIPdtcI5NrkbgGFmFX+rH27wjUeLWMwSng7H6Aa1hHCXsxs8KoR1xa8TdT5vbtD2UYWE3WDrWLx7dAo3GAimTToPTGfEP3k32OQIp4kne5nBdMlFvaa4wSTd4GvubrBJCK9Idtygo06HGwxPCLe5u8EmISTZcYNFZjOFGN2gMFY4xyZ3N5ibEC5wgxe7QQbI/BxhNm4wNyHEDaZfr5zcoJYQbnJ3gzkJofWrdLhBBsiQ0bpj3OAIs3KDwsjxhV+MAi8veG6PDkK9cINu3WDx2SDk6AZdC6GsyZURj7baZf9L4RzfivNvAZxL/FUgSSmudOm5HNvA81DErukpjqnGQNAQk6/Kgv1D4Txdy7Q7ZcZcCuGsiBQTsJVyUmucZhOxg3m/TPGIGW2FDBQul2d2DQ5xG1jeOx/AXa0RvtQF35DHcMQJMjVv7wZdr1HTRx0L4Y7QwhHmEa4V+6Ls4RoIoWMhBGCA7MYd7RG/EE7MDQcAV1PH6UGBjKfFRQLrzVE4wpLwAgTbd14Jcz9CWNUjW4UzBAhyWrwlzP/j8vEZeer9uxy1GK47nqv6aeOVPuv3yF1tyHlaXCg/HoYQtqPLk+ovn9YyNJ56x6VCztNiYUmo+5kaa8HDt8C0WJc1M6K4hHDNnS1gWqzKHnMRnxDSYMC0WLlP4QbbCWEoDmxBgwHTYjXkcZkbtmBrKYRmKrr3XC7eSQWmxXp96ak+rjEWzTTdNZadY757LNfMdiNVgMgRIVwrnUtenRPRW7HG3l0IZX3Ox+cbT26gCJAiZsrKtDWUqbFpFBlRSk9lqtihBAC8C6ERQ3ng8reeyyPf08ANAkAYQvjOrvcphhVNAgBBCeE7Mbwp9BZym1hzax8AghRCI4byrYypEcRnR6KIGwQAL1htumCeQ+JtDwDIzxECACCEAInCxsGAEELfjAMs05RmgaiE0LyPmTOxd9r7ug1DE0PWvHHu0TnC3JO2DFBIbKkCq4N8cXHOFDn8vHF58lEMEaiTVLYn+nnkjOxO8ncdjz+L7h/nnnva2OLeOMNL6+BiIwEp0535Hs6mp2uCHQ91+5TFf+9jd3kFd3fs7bXRCfER9/WD+AfJrTkuRV5lrCKtgytB+nKiTHNSLgikjR46nuPJdmrM2gnTjNDw8emGBVvCJUPjzlbDBjdYFv18UhD65zXiVxmrTK4Jbpg17Ww1pPFxg7hB3GDObvCoEOIG3Tkx3KCegPckinPSNn032OQIywyCssnkmppucOWx3E1ucO/hmhBf3p/d9X74yQ1O659J4g3z4mkH7GXkbtBnQlcexLkqoDOmr72E7AaPOcIcGt/XdGdZ+P06YNUxoX2Vf3HCmbkaXHCDykIUshv8IISZuMG9LyE0I5KvhNBaG/RR/upETKVOr31eEy7KfVftpOIGPzvCHJ4b9PphKPMQs49pglbHnvWc0G3u2mrnLW7QDWWobvBNCM27n7eJN8QikA9D3fU8xVS7U2wGkT7LX7Uok0yPn3GDwbtCGVz6/hjcrK3xGWbS+CKCZSAJIQ5n2qOzqpTLvzHl3/fQZtuWZRJXuMANRjFF7ksMrb6PPjRu8D7R2EswvoUigp/E5Fqp8/biBhvK7/KDXpVlmUrTyfZ9XRMuFsOvPRiBmc0y2DDRxpcgy8vV41C/kyyNZDrvjRFEFw6rclj+rfmgl4iP9rrnRW90mE42Nm1v29Fwgz1Ok+tj7Ch3rN3gv2Uyu8ykshebOJWtcSzRYTaevdJMuB7LfmVcokYdVLYIM/EcmzKdY3lJ3ii12TbnV/ne5Y4WO9u2/EeAAQCFTz6NXGXltgAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/boat.fa0b7422.png\";","module.exports = __webpack_public_path__ + \"static/media/plane.b19b8edf.png\";","export const images = {\r\n    bg: require('./bg.jpg'),\r\n    start: require('./start.png'),\r\n};\r\n","import React, { useCallback } from 'react';\r\nimport { match, Link } from 'react-router-dom';\r\nimport { History, Location } from 'history';\r\nimport './index.css';\r\nimport { images } from '../asset';\r\n\r\ninterface LocationState {\r\n};\r\ninterface Props {\r\n    history: History<LocationState>;\r\n    location: Location<LocationState>;\r\n    match: match;\r\n};\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst Home = ({ history, location, match }: Props) => {\r\n    const onStart = useCallback(async () => {\r\n        if (window.requestFullscreen) await window.requestFullscreen();\r\n        else if (document.body.requestFullscreen) await document.body.requestFullscreen();\r\n        else if (document.body.webkitRequestFullscreen) await new Promise(resolve => { document.body.webkitRequestFullscreen(); setTimeout(() => resolve(), 1000); });\r\n        else console.warn('browser not supported `requestFullscreen`'); // eslint-disable-line no-console\r\n        history.push({ ...location, pathname: '/--start' });\r\n    }, []);\r\n    return (\r\n        <div className=\"Home\">\r\n            <img src={images.bg} alt=\"background\" />\r\n            <img className=\"button\" id=\"start\" onClick={onStart} src={images.start} alt=\"start\" />\r\n            <Link className=\"button\" id=\"setting\" to={{...location, pathname: '/Setting'}}>（设置）</Link>\r\n        </div>\r\n    );\r\n};\r\nexport default Home;\r\n","import { $Types } from '../../core/@types';\r\nimport { OperatorFunction, Observable } from 'rxjs';\r\nimport { map, filter } from 'rxjs/operators';\r\n\r\nexport function pick<T, K>(key: K): OperatorFunction<T, $Types.index<T, K>> {\r\n    const predicate: $Types.isIndexAt<T, K> = (data: T) => data[key] !== undefined;\r\n    const mapper = (data: T) => data[key];\r\n    return (source: Observable<T>) => source.pipe(filter(predicate)).pipe(map(mapper));\r\n};\r\n","import { useState, useEffect, useDebugValue } from 'react';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport function useObservable<T>(observable: Observable<T>, init?: T, deps = []) {\r\n    const [value, setValue] = useState(init);\r\n    useEffect(() => {\r\n        const subcription = observable.subscribe(value => setValue(value));\r\n        return () => subcription.unsubscribe();\r\n    }, deps);\r\n    useDebugValue(value, JSON.stringify);\r\n    return value;\r\n};\r\n\r\nexport * from './pick';\r\n","export function shuffle<E>(elements: E[]) {\r\n    const wrapper = elements.map(element => ({ element, weight: Math.random() }));\r\n    wrapper.sort(compareExtract(({ weight }) => weight));\r\n    return wrapper.map(({ element }) => element);\r\n};\r\n\r\nexport type Comparator<E> = (e1: E, e2: E) => -1 | 0 | 1;\r\n\r\nexport const compareNature = (l, r) => l < r ? -1 : l === r ? 0 : 1;\r\n\r\nexport function compareExtract<T, E>(mapper: (element: T) => E, compare: Comparator<E> = compareNature): Comparator<T> {\r\n    return (target1, target2) => compare(mapper(target1), mapper(target2));\r\n}\r\n","import { Comparator, compareNature } from './util';\r\n\r\nexport class TreeSet<E> {\r\n    elements: Readonly<E>[] = [];\r\n    constructor(comparator: Comparator<E> = compareNature, elements?: Readonly<E>[]) {\r\n        this.comparator = comparator;\r\n        elements && this.pushAll(elements);\r\n    }\r\n\r\n    get size() { return this.elements.length; }\r\n    get isEmpty() { return this.elements.length === 0; }\r\n    get head() { return this.elements[0]; }\r\n    get last() { return this.elements[this.size - 1]; }\r\n\r\n    /**\r\n     * get and remove the head element\r\n     */\r\n    top() {\r\n        if (this.isEmpty) return undefined;\r\n        return this.elements.splice(0, 1)[0];\r\n    }\r\n\r\n    /**\r\n     * get and remove the last element\r\n     */\r\n    pop() {\r\n        if (this.isEmpty) return undefined;\r\n        return this.elements.splice(this.size - 1, 1)[0];\r\n    }\r\n\r\n    push(element: Readonly<E>) {\r\n        const index = binarySearch(this.comparator, this.elements, element);\r\n        this.elements.splice(index, 0, element);\r\n    }\r\n    pushAll(elements: Readonly<E>[]) {\r\n        elements.forEach(element => this.push(element));\r\n    }\r\n};\r\n\r\nexport function binarySearch<E>(comparator: Comparator<E>, elements: E[], target: E) {\r\n    let left = 0;\r\n    let right = elements.length - 1;\r\n\r\n    while (left <= right) {\r\n        const middle = (left + right) >> 1;\r\n        const cmp = comparator(elements[middle], target);\r\n        if (cmp < 0) {\r\n            left = middle + 1;\r\n        } else if (cmp > 0) {\r\n            right = middle - 1;\r\n        } else {\r\n            return middle;\r\n        }\r\n    }\r\n\r\n    return left;\r\n}\r\n","/* eslint-disable no-console */\r\n\r\nimport { TreeSet, compareExtract, shuffle } from '../core/collection';\r\n\r\nexport type Member = { name: string, gender: 'male' | 'female', type: '其它' | '美术' | '特殊' };\r\nexport const members: Promise<Member[][]> = (\r\n    typeof window === 'undefined'\r\n        ? async () => {\r\n            const fs = require('fs');\r\n            const dir = fs.existsSync('./public') ? 'public' : '.';\r\n            const text = fs.readFileSync(`${dir}/config.SECRET.json`).toString();\r\n            return JSON.parse(text);\r\n        }\r\n        : async () => {\r\n            const resp = await fetch(`${process.env.PUBLIC_URL}/config.SECRET.json`);\r\n            return await resp.json();\r\n        }\r\n)()\r\n    .then(\r\n        (json: { [type: string]: { [gender: string]: string[] } }) => Object.entries(json)\r\n            .reduce((dict, [type, members]) => ({\r\n                ...dict,\r\n                [type]: ['female', 'male']\r\n                    .map(gender => (members[gender] || []).map(name => ({ name, gender, type })))\r\n                    .reduce((female, male) => [...female, ...male]),\r\n            }), [])\r\n    )\r\n    .then(({ 其它, 美术, 特殊 }) => [其它, 美术, 特殊]);\r\n\r\nconst femaleNum = (group: Member[]) => group.reduce((num, { gender }) => gender === 'female' ? num + 1 : num, 0);\r\n\r\nexport const divideGroup = (members: Readonly<Member[][]>, size: number = 7) => {\r\n    const groups = members.map(members => shuffle(members.filter(({ name }) => !name.startsWith('//'))))\r\n        .reduce((result, members) => [...result, ...members], [])\r\n        .reduce(\r\n            (groups, member, index) => {\r\n                const groupIndex = index % size;\r\n                groups[groupIndex] = [...groups[groupIndex], member];\r\n                return groups;\r\n            },\r\n            new Array(size).fill().map((): Member[] => []),\r\n        );\r\n\r\n    const scores = new TreeSet(compareExtract(({ score }) => score), groups.map((group, index) => ({ index, score: femaleNum(group) })));\r\n    while (true) {\r\n        if (scores.last.score - scores.head.score < 2) break;\r\n        const min = scores.top();\r\n        const max = scores.pop();\r\n\r\n        // exchange\r\n        const minGroup = groups[min.index];\r\n        const maxGroup = groups[max.index];\r\n        const maleIndex = minGroup.findIndex(({ gender }) => gender === 'male');\r\n        const femaleIndex = maxGroup.findIndex(({ gender }) => gender === 'female');\r\n        const male = minGroup[maleIndex];\r\n        const female = maxGroup[femaleIndex];\r\n        maxGroup[femaleIndex] = male;\r\n        minGroup[maleIndex] = female;\r\n\r\n        scores.push({ ...min, score: min.score + 1 });\r\n        scores.push({ ...max, score: max.score - 1 });\r\n    }\r\n\r\n    const divided = groups.map(group => shuffle(group));\r\n    console.info('分组完毕：', {\r\n        '': '点击展开详情',\r\n        get 点击查看统计信息() { // eslint-disable-line getter-return\r\n            console.group('各组妹子的数量：');\r\n            divided.forEach((group, index) => console.info(`${1 + index}组:`, `${femaleNum(group)}人`));\r\n            console.groupEnd();\r\n\r\n            console.group('各组各类人的数量：');\r\n            const analyzeType = (group: Member[]) => {\r\n                const types = group.reduce((sum, { type }) => ({ ...sum, [type]: 1 + (sum[type] || 0) }), {});\r\n                return Object.entries(types).sort(compareExtract(([type]) => type))\r\n                    .map(([type, num]) => `${type}${num}人`).join(', \\t');\r\n            };\r\n            divided.forEach((group, index) => console.info(`${1 + index}组:`, analyzeType(group)));\r\n            console.groupEnd();\r\n\r\n            console.group('各组成员详情：');\r\n            divided.map((group, index) => console.info(`${1 + index}组:`, group.map(({ name, gender }) => `${name} ${gender === 'female' ? '♀' : '♂'}`)));\r\n            console.groupEnd();\r\n\r\n            return '统计信息已输出到控制台';\r\n        },\r\n    });\r\n    return divided;\r\n};\r\n","import { Member, divideGroup } from './member';\r\nimport { Subject, from, interval } from 'rxjs';\r\nimport { shuffle } from '../core/collection';\r\nimport { zip, delay, scan, mergeMap, take, startWith, map } from 'rxjs/operators';\r\nimport { $Types } from './@types';\r\n\r\nconst boats = new Array(7).fill().map((_, index) => ({\r\n    name: `${index + 1}队`,\r\n    position: [10, 8 + (152 - 115) / 2 + index * 152],\r\n    velocity: [0],\r\n}));\r\nexport type Boat = $Types.element<typeof boats>;\r\n\r\nconst seats = new Array(22).fill().map((_, index) => ({\r\n    position: [137 + 137 * (index % 11), (index / 11 | 0) === 0 ? 6 : 64],\r\n}));\r\n\r\nexport const calcPosition = (boat: number, seat: number) => {\r\n    const { position } = boats[boat];\r\n    const { position: offset } = seats[seat];\r\n    return [position[0] + offset[0], position[1] + offset[1]];\r\n};\r\n\r\nexport type SeatedMember = {\r\n    index: number,\r\n    position: [number, number],\r\n} & Member;\r\n\r\nexport type MovingMember = {\r\n    vertex: [[number, number], number, number], // [[x, y], angle, progress]\r\n    velocity: [number, number, number],         // [线速度, 角速度, 匀速度]\r\n} & SeatedMember; // { position: [x, y, scale] }\r\n\r\n/**\r\n * 从分组集合中随机发射队员.\r\n * @param {ReturnType<typeof divideGroup>} groups 队员分组.\r\n * @param {number} freq 发射频率，多少秒发射一个.\r\n * @param {number} turn 转向次数，队员路径顶点数.\r\n */\r\nexport default (groups: ReturnType<typeof divideGroup>, freq = 1.2, turn = 3) => {\r\n    const seated: Subject<SeatedMember> = new Subject()\r\n        .pipe(delay(turn * freq * 1000));\r\n    const moving: Subject<MovingMember[]> = new Subject()\r\n        .pipe(scan(shootPathFit(freq, turn), []));\r\n\r\n    const subscription = from([\r\n        ...shuffle(groups\r\n            .map((group, boat) => group.map(({ type: _, ...member }, seat) => ({ ...member, position: calcPosition(boat, seat) })))\r\n            .reduce((members, group) => [...members, ...group], [])\r\n        ).map((member, index): SeatedMember => ({ ...member, index })), // .slice(7, 8),\r\n        ...new Array(1 + turn).fill().map((): SeatedMember => null), // 最后来几个空数据占位\r\n    ])\r\n        .pipe(zip(interval(freq * 1000), member => member))\r\n        .subscribe(member => {\r\n            seated.next(member);\r\n            moving.next(member);\r\n        });\r\n\r\n    const boatsShooter = from(shuffle(boats).slice(0))\r\n        .pipe(mergeMap(boat => {\r\n            const distance = 800 - Math.random() * 500;\r\n            const time = turn - 1.5;\r\n            const shoot = {\r\n                ...boat,\r\n                position: [boat.position[0] - distance, boat.position[1]],\r\n                velocity: [distance / time / 60, 0],\r\n            };\r\n            return interval(time * 1000)\r\n                .pipe(take(1))\r\n                .pipe(map(() => boat))\r\n                .pipe(startWith(shoot));\r\n        }));\r\n\r\n    return { seated, moving, boats: boatsShooter, subscription };\r\n};\r\n\r\nconst shootPathFit = (freq: number, turn: number) => {\r\n    const frames = 60 * freq;\r\n    return (history: MovingMember[], member: SeatedMember) => (\r\n        [member, ...history.slice(0, turn)].map(\r\n            (member, index): MovingMember => {\r\n                if (member == null) return null;\r\n\r\n                const { name, index: id, position: target } = member;\r\n                const [originZero, fitFunction] = id % 8 === 3 ? [5, fitTwine] : id % 8 === 7 ? [3, fitSpiral] : [0, fitCircle];\r\n                const origin = shootOrigin(target, originZero);\r\n\r\n                const vector = [target[0] - origin[0], target[1] - origin[1]];                                  // 位移矢量\r\n                const distance = Math.sqrt(vector.map(vec => Math.pow(vec, 2)).reduce((xp, yp) => xp + yp));    // 位移标量\r\n                const angle = vectorAngle(vector);  // 方向角度\r\n                const progress = index / turn;      // 当前进度\r\n\r\n                const { vertex, velocity } = fitFunction({\r\n                    freq, turn, index, frames,\r\n                    target, origin, vector,\r\n                    distance, angle, progress,\r\n                });\r\n\r\n                return {\r\n                    ...member,\r\n                    name: index < turn ? name : null,\r\n                    vertex: [...vertex, progress],\r\n                    velocity: [...velocity, 1 / frames / turn],\r\n                };\r\n            }\r\n        )\r\n    );\r\n};\r\n\r\n/**\r\n * 0-------1------2>\r\n * | \\     |    / '\r\n * |   \\ 5 | 6 /  '\r\n * |   4 \\ | / 7  '\r\n * 7--------------3\r\n * |   3 / | \\ 0  '\r\n * |   / 2 | 1 \\  '\r\n * | /     |     \\'\r\n * 6       5      4\r\n * v\r\n */\r\nconst shootOrigin = ([x, y]: [number, number], zero = 0, width = 1920, height = 1080) => {\r\n\r\n    const a = y - height / 2 > 0;           // [3, 4, 6, 7]:    y > 0\r\n    const b = y / height - x / width > 0;   // [4, 6, 0]:       y - x > 0\r\n    const c = x - width / 2 < 0;            // [5, 6, 0, 1]:    x < 0\r\n    const d = y / height + x / width < 1;   // [6, 0, 2]:       y + x < 1\r\n\r\n    const index = (\r\n        a && !b ? (0)\r\n            : b && !c ? (1)\r\n                : c && !d ? (2)\r\n                    : d && a ? (3)\r\n                        : !a && b ? (4)\r\n                            : !b && c ? (5)\r\n                                : !c && d ? (6)\r\n                                    : !d && !a ? (7) : 'never'\r\n    );\r\n\r\n    return [\r\n        [0, 0],\r\n        [width / 2, 0],\r\n        [width, 0],\r\n        [width, height / 2],\r\n        [width, height],\r\n        [width / 2, height],\r\n        [0, height],\r\n        [0, height / 2],\r\n    ][(index + zero) % 8];\r\n};\r\n\r\nconst vectorAngle = (vector: [number, number]) => {\r\n    const angle = Math.atan(vector[1] / vector[0]);\r\n    return (angle < 0 ? Math.PI + angle : angle) + (vector[1] < 0 ? Math.PI : 0);\r\n};\r\n\r\n// 路径拟合参数\r\ninterface PathFitParam {\r\n    freq: number, turn: number, index: number, frames: number, // 基础参数\r\n    target: [number, number],   // 终点坐标\r\n    origin: [number, number],   // 起点坐标\r\n    vector: [number, number],   // 位移矢量\r\n    distance: number,           // 位移标量\r\n    angle: number,              // 方向角度\r\n    progress: number,           // 当前进度\r\n}\r\n\r\n// 相接等圆拟合\r\nconst fitCircle = ({ turn, index, frames, origin, vector, distance, angle, progress }: PathFitParam, bend = 1 / 3) => {\r\n    const offset = (index % 2 === 0 ? 1 : -1) * Math.PI * bend; // 偏转\r\n    const offsetHalf = offset / 2;                              // 半偏转\r\n    const move = distance / turn;                               // 位移\r\n\r\n    // 当前位置\r\n    const point = [origin[0] + vector[0] * progress, origin[1] + vector[1] * progress];\r\n    // 旋转角度\r\n    const rotate = angle - offsetHalf;\r\n\r\n    // 计算速度\r\n    const ω = offset / frames;                  // 角速度\r\n    const ν = move / Math.sin(offsetHalf) / 2;  // 线速度 // 准确的说是线速度与角速度之比\r\n\r\n    return {\r\n        vertex: [point, rotate],\r\n        velocity: [ν, ω],\r\n    };\r\n};\r\n\r\n// 螺旋线形拟合\r\nconst fitSpiral = ({ turn, index, frames, origin, vector, distance, angle }: PathFitParam) => {\r\n    const offset = Math.PI;         // 偏转\r\n    const offsetHalf = offset / 2;  // 半偏转\r\n\r\n    // 计算某点的向量相对第一次的倍率，[ratio, diameter]\r\n    const vectorRatio = (index: number): [number, number] => {\r\n        if (index === 0) return [0, 0];\r\n        if (index === 1) return [1, 1];\r\n        const [ratio, previos] = vectorRatio(index - 1);\r\n        // const diameter = previos * (turn - bend) / turn;\r\n        const diameter = previos - 1 / (turn + 1);\r\n        const odd = index % 2 === 1;\r\n        return [ratio + (odd ? 1 : -1) * diameter, diameter];\r\n    };\r\n    const ratioTarget = vectorRatio(turn);                          // 目标点的倍率\r\n    const vectorFirst = vector.map(vec => vec / ratioTarget[0]);    // 第一次的位移向量\r\n    const ratioLast = vectorRatio(index);                           // 上一次的倍率\r\n    const vectorLast = vectorFirst.map(vec => vec * ratioLast[0]);  // 上一次的位移向量\r\n    const ratioNow = vectorRatio(index + 1);                        // 这一次的倍率\r\n    const diameter = distance / ratioTarget[0] * ratioNow[1];       // 位移直径\r\n\r\n    // 当前位置\r\n    const point = [origin[0] + vectorLast[0], origin[1] + vectorLast[1]];\r\n    // 旋转角度\r\n    const rotate = angle - offsetHalf + (index % 2 === 0 ? 0 : Math.PI);\r\n\r\n    // 计算速度\r\n    const ω = offset / frames;  // 角速度\r\n    const ν = diameter / 2;     // 线速度 // 准确的说是线速度与角速度之比\r\n\r\n    return {\r\n        vertex: [point, rotate],\r\n        velocity: [ν, ω],\r\n    };\r\n};\r\n\r\n// 圆环缠绕拟合\r\nconst fitTwine = ({ turn, index, frames, origin, vector, distance, angle }: PathFitParam, bend = 1 / 3) => {\r\n    const even = index % 2 === 0;                       // 奇偶次序\r\n    const offset = Math.PI * (even ? bend : 2 - bend);  // 偏转\r\n    const offsetHalf = offset / 2;                      // 半偏转\r\n\r\n    const knotsTotal = Math.ceil(turn / 2); // 总扭结数\r\n    const knotsNow = Math.ceil(index / 2);  // 当前扭结数\r\n\r\n    const ratioEven = (2 - bend) * 1 / (2 * knotsTotal * (1 - bend) + bend);            // 偶数弦长倍率\r\n    const ratioOdd = bend / (2 * knotsTotal * (1 - bend) + bend);                       // 奇数弦长倍率\r\n    const ratio = knotsNow * ratioEven - (even ? knotsNow : knotsNow - 1) * ratioOdd;   // 当前位置倍率\r\n    const delta = (even ? ratioEven : ratioOdd) * distance;                             // 当前弦长位移\r\n\r\n    // 当前位置\r\n    const point = [origin[0] + vector[0] * ratio, origin[1] + vector[1] * ratio];\r\n    // 旋转角度\r\n    const rotate = angle - offsetHalf - (even ? 0 : Math.PI);\r\n\r\n    // 计算速度\r\n    const ω = offset / frames;                  // 角速度\r\n    const ν = delta / Math.sin(offsetHalf) / 2; // 线速度 // 准确的说是线速度与角速度之比\r\n\r\n    return {\r\n        vertex: [point, rotate],\r\n        velocity: [ν, ω],\r\n    };\r\n};\r\n","import { $Types } from './@types';\r\nimport { subject } from '.';\r\nimport { members, Member, divideGroup } from './member';\r\nimport shoot, { SeatedMember, MovingMember, Boat } from './shoot';\r\nimport { compareExtract } from './collection';\r\n\r\nexport type Data = {\r\n    scene0: {\r\n        members: {\r\n            seated: SeatedMember,\r\n            moving: MovingMember[],\r\n        },\r\n        boat: Boat,\r\n    },\r\n    setting: {\r\n        members: Member[],\r\n    },\r\n};\r\ntype Scenes = $Types.key<Data>;\r\n\r\nconst state: {\r\n    scene: Scenes,\r\n    running: boolean,\r\n} = {};\r\n\r\nexport const mock = {\r\n    start(scene: Scenes) {\r\n        state.scene = scene;\r\n        state.running = true;\r\n\r\n        members\r\n            .then(divideGroup)\r\n            .then(shoot)\r\n            .then(({ seated, moving, boats, ...shooter }) => [\r\n                shooter.subscription,\r\n                seated.subscribe(seated => subject.next({ scene0: { members: { seated } } })),\r\n                moving.subscribe(moving => subject.next({ scene0: { members: { moving } } })),\r\n                boats.subscribe(boat => subject.next({ scene0: { boat } })),\r\n            ])\r\n            .then(subscriptions => this.pause = () => {\r\n                this.pause = () => { };\r\n                state.running = false;\r\n                subscriptions.forEach(sub => sub.unsubscribe());\r\n            });\r\n    },\r\n    setting() {\r\n        state.scene = 'setting';\r\n        state.running = false;\r\n\r\n        members\r\n            .then(members => members.reduce((list, members) => [...list, ...members], []))\r\n            .then(members => members.sort(compareExtract(({ name }) => name, (name1: string, name2: string) => name1.localeCompare(name2, 'zh'))))\r\n            .then(members => {\r\n                this.updateMember = (index: number, state: Partial<Member>) => {\r\n                    members[index] = { ...members[index], ...state };\r\n                    subject.next({ setting: { members: [...members] } });\r\n                };\r\n                return subject.next({ setting: { members } });\r\n            });\r\n    },\r\n    updateMember(index: number, state: Partial<Member>) { }, // eslint-disable-line no-unused-vars\r\n    pause() { },\r\n};\r\n","/** Logic */\r\n\r\nimport { $Types } from './@types';\r\nimport { Subject } from 'rxjs';\r\nimport { Data, mock } from './mock';\r\n\r\nexport * from './mock';\r\n\r\nexport const subject: Subject<Data> = new Subject();\r\n\r\nif (typeof window !== 'undefined' && window.core instanceof Function) window.core.subject = subject;\r\nexport const pipe: typeof subject.pipe = subject.pipe.bind(subject);\r\n\r\nexport type Core = typeof mock & { pipe: typeof pipe };\r\nexport type Event = $Types.key<Core>;\r\nexport type EventArgs = Parameters<$Types.value<Core>>;\r\nexport const events: Event[] = Object.keys(mock);\r\nexport default (event: Event, ...args: EventArgs) => Promise.resolve(mock[event](...args));\r\n","import mock, { events, Core, pipe } from '../core';\r\n\r\nconst rpc: typeof mock = window.core instanceof Function ? window.core : mock;\r\n\r\nconst core: Core = events.reduce((dict, key) => ({ ...dict, [key]: rpc.bind(null, key) }), {});\r\ncore.pipe = pipe;\r\n\r\nconst useCore = () => core;\r\nexport default useCore;\r\n","/** 如果是旧浏览器则返回 `legacy` ，否则返回空字符串，用于一些兼容性处理 */\r\nexport const legacy = window.CSS && window.CSS.supports && window.CSS.supports('display: flex') ? '' : 'legacy';\r\n\r\nconst autoPrefixProperties = (properties: string[]) =>\r\n    (style: string | React.CSSProperties) =>\r\n        typeof style === 'string'\r\n            ? style.replace(\r\n                new RegExp(`(;?\\r?\\n?)(\\\\s*)(${Array.from(properties).join('|')})([^;]+;\\r?\\n?)`, 'g'),\r\n                `$1${['-webkit-', '-moz-', '-ms-', ''].map(prefix => `$2${prefix}$3$4`).join('')}`\r\n            )\r\n            : Object.entries(style).map(\r\n                ([name, value]) =>\r\n                    properties.has(name)\r\n                        ? ['Webkit', 'Moz', 'ms']\r\n                            .map(prefix => [prefix, `${prefix}${name[0].toUpperCase()}${name.slice(1)}`])\r\n                            .reduce((style, name) => ({ ...style, [name]: value }), { [name]: value })\r\n                        : ({ [name]: value })\r\n            ).reduce((dict, style) => ({ ...dict, style }));\r\n\r\nexport const autoPrefix = autoPrefixProperties(new Set(['transform', 'transform-origin', 'transition']));\r\n","import { $Types } from '../../../core/@types';\r\nimport { UseResourceLoader } from '../../../pixi';\r\nimport { images as sharedImages } from '../../asset';\r\n\r\nexport const images = {\r\n    ...sharedImages,\r\n    boat: require('./boat.png'),\r\n    plane: require('./plane.png'),\r\n};\r\n\r\nconst asset: Record<$Types.key<typeof images>, UseResourceLoader> = Object.entries(images)\r\n    .map(([name, url]) => [name, { url }])\r\n    .reduce((dict, [name, option]) => ({ ...dict, [name]: option }), {});\r\n\r\nexport default asset;\r\n","import React, { ReactNode, useMemo, CSSProperties } from 'react';\r\nimport './index.css';\r\nimport { useRenderer } from '../Renderer';\r\nimport { useObservable } from '../../util/rxjs';\r\nimport { fromEvent } from 'rxjs';\r\nimport { map, debounceTime } from 'rxjs/operators';\r\nimport { CanvasRenderer, WebGLRenderer } from 'pixi.js';\r\n\r\ninterface Props {\r\n    id?: string, className?: string;\r\n    children?: ReactNode;\r\n    /** adapt the canvas by scaling the size instead of cropping it. */\r\n    scaleMode?: boolean,\r\n}\r\n\r\nconst styleOf = (renderer: WebGLRenderer | CanvasRenderer, scaleMode: boolean): CSSProperties => {\r\n    const { clientWidth, clientHeight, offsetLeft, offsetTop } = renderer.view;\r\n    if (!scaleMode) return { width: clientWidth, height: clientHeight, left: offsetLeft, top: offsetTop };\r\n    const { width, height } = renderer;\r\n    return {\r\n        width, height,\r\n        transform: `scale(${clientWidth / width}, ${clientHeight / height})`,\r\n        left: (clientWidth - width) / 2 + offsetLeft, top: (clientHeight - height) / 2 + offsetTop,\r\n    };\r\n};\r\n\r\nexport const UI = ({ id, className = '', children, scaleMode }: Props) => {\r\n    const renderer = useRenderer();\r\n    const styleEvent = useMemo(() =>\r\n        fromEvent(window, 'resize')\r\n            .pipe(map(_event => styleOf(renderer, scaleMode)))\r\n            .pipe(debounceTime(100))\r\n        , []);\r\n    const style = useObservable(styleEvent, useMemo(() => styleOf(renderer, scaleMode), []));\r\n    return (\r\n        <div id={id} className={`${className && `${className} `}PIXI UI`} style={style}>{children}</div>\r\n    );\r\n};\r\n","import React, { useMemo, useEffect } from 'react';\r\nimport { Gradient } from '../../pixi';\r\nimport { useObservable, pick } from '../../util/rxjs';\r\nimport useCore from '../../util/useCore';\r\nimport { images } from './asset';\r\nimport { scan, map } from 'rxjs/operators';\r\nimport { UI } from '../../pixi/UI';\r\nimport './index.css';\r\n\r\nconst Scene0 = () => {\r\n    const core = useCore();\r\n\r\n    const seated = useObservable(useMemo(() =>\r\n        /* subject source */core\r\n            .pipe(pick('scene0'), pick('members'), pick('seated'))\r\n            .pipe(map(member => [member]), scan((history, members) => [...history, ...members])), // if I use initial value instead of pre-map to array, then the return type would wrong.\r\n        /* initial value */[]\r\n    ), []);\r\n    const moving = useObservable(useMemo(() => core.pipe(pick('scene0'), pick('members'), pick('moving')), []), []);\r\n    const boats = useObservable(useMemo(() =>\r\n        /* subject source */core\r\n            .pipe(pick('scene0'), pick('boat'))\r\n            .pipe(map(({ name, ...boat }) => ({ [name]: boat })), scan((history, boats) => ({ ...history, ...boats }))),\r\n            /* initial value */{}\r\n    ), []);\r\n\r\n    // useMemo(() => console.log('boats', boats), [boats]);\r\n\r\n    useEffect(() => {\r\n        core.start('scene0');\r\n        return core.pause;\r\n    }, []);\r\n\r\n    return (\r\n        <UI className=\"Scene0\" scaleMode={true}>\r\n            <img src={images.bg} alt=\"background\" />\r\n            <div className=\"boats\">\r\n                {Object.entries(boats).map(([name, { position, velocity }]) => (\r\n                    <MovingBoat key={name} name={name} position={position} velocity={velocity} />\r\n                ))}\r\n            </div>\r\n            <div className=\"members\">\r\n                {seated.filter(member => member != null).map(({ name, position: [left, top] }) => (\r\n                    <span className=\"member\" key={name} style={{ left, top }}>{nameAlign(name)}</span>\r\n                ))}\r\n            </div>\r\n            <div className=\"members\">\r\n                {moving.filter(member => member != null).map(({ name, vertex, velocity }) => (\r\n                    <MovingMember key={name} name={name} vertex={vertex} velocity={velocity} />\r\n                ))}\r\n            </div>\r\n        </UI>\r\n    );\r\n};\r\nexport default Scene0;\r\n\r\ninterface MovingBoatProps {\r\n    name: string,\r\n    position: [number, number],\r\n    velocity: [number],\r\n}\r\n\r\nconst MovingBoat = ({ name, position: [x, y], velocity: [v] }: MovingBoatProps) => {\r\n    return (\r\n        <Gradient {...Gradient.Velocity([[x, y], [v]])} >{([[left, top]]) => (\r\n            <div style={{ left, top }}>\r\n                <img src={images.boat} alt={name} />\r\n                <span>{name}</span>\r\n            </div>\r\n        )}</Gradient>\r\n    );\r\n};\r\n\r\ninterface MovingMemberProps {\r\n    name: string,\r\n    vertex: [[number, number], number, number], // [[x, y], angle, progress]\r\n    velocity: [number, number, number],         // [线速度, 角速度, 匀速度]\r\n}\r\n\r\nconst MovingMember = ({ name, vertex: [[x, y], angle, progress], velocity: [ν, ω, v] }: MovingMemberProps) => (\r\n    <Gradient {...Gradient.Velocity([[0, progress], [ω, v]])}>{([[offset, progress]]) => {\r\n        const left = x + ν * (Math.cos(angle) * Math.sin(offset) + Math.sin(angle) * Math.cos(offset) - Math.sin(angle));\r\n        const top = y + ν * (Math.sin(angle) * Math.sin(offset) - Math.cos(angle) * Math.cos(offset) + Math.cos(angle));\r\n        return (\r\n            <div style={{ left, top, transform: `scale(${1 + (1 - progress) * 2})` }}>\r\n                <img src={images.plane} alt={name} style={{ transform: `rotate(${angle + offset}rad)` }} />\r\n                {name && <span>{nameAlign(name)}</span>}\r\n            </div>\r\n        );\r\n    }}</Gradient>\r\n);\r\n\r\nconst nameAlign = (name: string) => name.length === 2 ? `${name[0]}　${name[1]}` : name;\r\n","import React, { ReactNode, useState, useEffect, useMemo } from 'react';\r\nimport { useObservable, pick } from '../../util/rxjs';\r\nimport useCore from '../../util/useCore';\r\nimport './index.css';\r\n\r\nconst Setting = ({ line = 3 }: { line: number }) => {\r\n    const core = useCore();\r\n\r\n    const members = useObservable(useMemo(() => core.pipe(pick('setting'), pick('members')), []), []);\r\n\r\n    const lined = new Array(Math.ceil(members.length / line)).fill()\r\n        .map((_, index) => index * line)\r\n        .map(index => new Array(line).fill().map((_, offset) => index + offset)\r\n            .filter(index => members[index] != null)\r\n            .map(index => ({ ...members[index], index }))\r\n            .map(({ name, ...member }) => {\r\n                const disabled = name.startsWith('//');\r\n                return { ...member, name: disabled ? name.slice(2) : name, disabled };\r\n            })\r\n        );\r\n\r\n    useEffect(() => {\r\n        core.setting();\r\n        return core.pause;\r\n    }, []);\r\n\r\n    const [insert, setInsert] = useState({ name: '', gender: 'male', type: '其它' });\r\n\r\n    if (!members.length) return <h3>LOADING</h3>;\r\n    return (\r\n        <div className=\"Setting\">\r\n            <div className=\"titleBar\">\r\n                <p id=\"save\" onClick={() => {\r\n                    const exported = members.reduce((dict, { name, gender, type }) => {\r\n                        const genders = dict[type] || {};\r\n                        const members = genders[gender] || [];\r\n                        return { ...dict, [type]: { ...genders, [gender]: [...members, name] } };\r\n                    }, {});\r\n                    console.info('保存配置：', exported); // eslint-disable-line no-console\r\n                    const file = new Blob([JSON.stringify(exported, undefined, '    ')], { type: 'text/plain' });\r\n                    const save = document.createElement('a');\r\n                    save.download = 'config.SECRET.json';\r\n                    save.href = URL.createObjectURL(file);\r\n                    save.click();\r\n                }}>保存</p>\r\n                <div id=\"insert\">\r\n                    <input className=\"name\" value={insert.name} placeholder=\"姓名\" onChange={({ target: { value } }) => setInsert({ ...insert, name: value.trim() })} />\r\n                    <select value={insert.gender} onChange={({ target: { value } }) => setInsert({ ...insert, gender: value })}>\r\n                        <option value=\"male\">帅哥</option>\r\n                        <option value=\"female\">美女</option>\r\n                    </select>\r\n                    <select value={insert.type} onChange={({ target: { value } }) => setInsert({ ...insert, type: value })}>\r\n                        <option value=\"其它\">其它</option>\r\n                        <option value=\"特殊\">特殊</option>\r\n                        <option value=\"美术\">美术</option>\r\n                    </select>\r\n                    <span id=\"commit\" onClick={() => {\r\n                        if (!insert.name) return;\r\n                        setInsert({ name: '', gender: 'male', type: '其它' });\r\n                        core.updateMember(members.length, insert);\r\n                    }}>插入</span>\r\n                </div>\r\n            </div>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        {new Array(line).fill().map((_, index) => (\r\n                            <TableHead key={index} index={index}>\r\n                                <th>姓名</th>\r\n                                <th>性别</th>\r\n                                <th>类别</th>\r\n                                <th>禁用</th>\r\n                            </TableHead>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>{lined.map((members, index) => (\r\n                    <tr key={index}>{members.map(({ index, name, gender, type, disabled }) => (\r\n                        <TableMember key={index} index={index}>\r\n                            <td>\r\n                                <input className=\"name\" value={name} onChange={({ target: { value } }) => core.updateMember(index, { name: value.trim() })} />\r\n                            </td>\r\n                            <td>\r\n                                <select value={gender} onChange={({ target: { value } }) => core.updateMember(index, { gender: value })}>\r\n                                    <option value=\"male\">帅哥</option>\r\n                                    <option value=\"female\">美女</option>\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <select value={type} onChange={({ target: { value } }) => core.updateMember(index, { type: value })}>\r\n                                    <option value=\"其它\">其它</option>\r\n                                    <option value=\"特殊\">特殊</option>\r\n                                    <option value=\"美术\">美术</option>\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <input type=\"checkbox\" checked={disabled} onChange={({ target: { checked } }) => core.updateMember(index, { name: `${checked ? '//' : ''}${name}` })} />\r\n                            </td>\r\n                        </TableMember>\r\n                    ))}</tr>\r\n                ))}</tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\nexport default Setting;\r\n\r\ntype TableProps = {\r\n    index: number,\r\n    children: ReactNode,\r\n};\r\nconst TableHead = ({ children }: TableProps) => (\r\n    <>\r\n        <th>#</th>\r\n        {children}\r\n        <th className=\"padding\"></th>\r\n    </>\r\n);\r\nconst TableMember = ({ index, children }: TableProps) => (\r\n    <>\r\n        <td>{`00${1 + index}`.slice(-3)}</td>\r\n        {children}\r\n        <td className=\"padding\"></td>\r\n    </>\r\n);\r\n","/** Render */\r\n\r\nimport React from 'react';\r\nimport { match, BrowserRouter as Router, Route, Redirect, RouteComponentProps } from 'react-router-dom';\r\nimport './index.css';\r\nimport { Renderer, Ticker, Stage } from '../pixi';\r\nimport Home from './Home';\r\nimport Scene0 from './Scene0';\r\nimport Setting from './Setting';\r\n\r\nconst Scenes = {\r\n    '0': Scene0,\r\n};\r\n\r\ninterface Props {\r\n    match: match<{ sceneId: '0' }>;\r\n};\r\n\r\nconst Game = ({ match }: Props) => {\r\n    const Scene = Scenes[match.params.sceneId];\r\n\r\n    return (\r\n        <Ticker>\r\n            <Renderer id=\"game\" {...Renderer.Creator({ width: 1920, height: 1080, transparent: true })}>\r\n                <Stage>\r\n                    <Stage.TickRefresh />\r\n                    <Scene />\r\n                </Stage>\r\n            </Renderer>\r\n        </Ticker>\r\n    );\r\n};\r\n\r\nexport default (\r\n    <Router>\r\n        <>\r\n            <Route exact path={`${process.env.PUBLIC_URL}/`} /* redirect the root page to `Home` */\r\n                component={({ location }: RouteComponentProps) => <Redirect to={{ ...location, pathname: '/Home' }} />} />\r\n            <Route path={'/Home'} component={Home} />\r\n\r\n            <Route exact path={'/--start'} /* redirect `start` to first scene */\r\n                component={({ location }: RouteComponentProps) => <Redirect to={{ ...location, pathname: '/Scene/0' }} />} />\r\n            <Route path=\"/Scene/:sceneId\" component={Game} />\r\n            \r\n            <Route path={'/Setting'} component={Setting} />\r\n        </>\r\n    </Router>\r\n);\r\n","import ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Game from './game';\r\nimport './util/devQRCode';\r\n\r\nReactDOM.render(Game, document.getElementById('root'));\r\n","import { ReactNode, useState, Dispatch, useRef, Ref, useEffect, useDebugValue } from 'react';\r\nimport { useTicker } from '..';\r\nimport { ticker } from 'pixi.js';\r\n\r\ntype Ticker = ticker.Ticker;\r\n\r\nexport type PointsFn<P> = (ticker: Ticker, points: Array<P>) => Array<P>;\r\nexport type GradientFn<P, S> = (ticker: Ticker, points: Array<P>, state: S) => S;\r\n\r\nexport function useGradient<P, S>(pointsFn: PointsFn<P>, gradientFn: GradientFn<P, S>) {\r\n    const ticker = useTicker();\r\n\r\n    const points: Ref<Array<P>> = useRef([]);\r\n    useEffect(() => {\r\n        points.current = pointsFn(ticker, points.current);\r\n    }, [pointsFn]);\r\n\r\n    const [state, setState]: [S, Dispatch<S>] = useState(null);\r\n    useEffect(() => {\r\n        let state = null;\r\n        const gradient = () => {\r\n            state = gradientFn(ticker, points.current, state);\r\n            setState(state);\r\n        };\r\n        ticker.add(gradient);\r\n        return () => ticker.remove(gradient);\r\n    }, [gradientFn]);\r\n\r\n    useDebugValue(state, JSON.stringify);\r\n    return state;\r\n};\r\n\r\ninterface Props<P, S> {\r\n    pointsFn: PointsFn<P>,\r\n    gradientFn: GradientFn<P, S>,\r\n    children?: (state: S) => ReactNode,\r\n}\r\n\r\nexport function Gradient<P, S>({ children, pointsFn, gradientFn }: Props<P, S>) {\r\n    const state = useGradient(pointsFn, gradientFn);\r\n    if (state == null) return null;\r\n    return children && children(state);\r\n};\r\n\r\nGradient.Simple = require('./Simple').default;\r\nGradient.Velocity = require('./Velocity').default;\r\n","import React, { ReactNode, createContext, Context, useContext, useRef, useMemo } from 'react';\r\nimport { RendererOptions, CanvasRenderer, WebGLRenderer, autoDetectRenderer } from 'pixi.js';\r\nimport { useCloseable } from './hook';\r\nimport { $Props } from '../core/@types';\r\n\r\ninterface Props {\r\n    id?: string, className?: string;\r\n    children?: ReactNode;\r\n    create?: $Props.frozen<(view: HTMLCanvasElement) => WebGLRenderer | CanvasRenderer>;\r\n}\r\n\r\nexport const RendererContext: Context<WebGLRenderer | CanvasRenderer> = createContext(null);\r\nRendererContext.displayName = 'Renderer';\r\n\r\nexport const Renderer = ({ id, className, children, create }: Props) => {\r\n    const canvasRef = useRef(null);\r\n    const renderer = useCloseable(() => create ? create(canvasRef.current) : autoDetectRenderer({ view: canvasRef.current }));\r\n    return (\r\n        <>\r\n            <canvas id={id} className={className} ref={canvasRef} />\r\n            {renderer && (\r\n                <RendererContext.Provider value={renderer}>\r\n                    {children}\r\n                </RendererContext.Provider>\r\n            )}\r\n        </>\r\n    );\r\n};\r\nRenderer.Creator = (options?: RendererOptions) => useMemo(() => ({ create: (view: HTMLCanvasElement) => autoDetectRenderer({ view, ...options }) }), []);\r\n\r\nexport const useRenderer = () => useContext(RendererContext);\r\n\r\nexport const useScreen = () => {\r\n    const renderer = useContext(RendererContext);\r\n    return renderer && renderer.screen;\r\n};\r\n\r\nexport const useView = () => {\r\n    const renderer = useContext(RendererContext);\r\n    return renderer && renderer.view;\r\n};\r\n"],"sourceRoot":""}